オブジェクト指向って何
=

プログラミング初学者にとって、オブジェクト指向を理解するのは難しいようです。
ただ、職業プログラマでも人に説明できる人は多くないかも知れません。
オブジェクト指向を正しく活用できている人はさらにその数が少ないです。


プログラミング・パラダイム
-

オブジェクト指向とは、数あるプログラミング・パラダイムの中の一つである、と言えます。

プログラミング・パラダイムも説明が難しい言葉ですが、プログラムの書き方・お作法と言えば良いでしょうか。
イマドキのプログラミング言語は、複数のパラダイムをサポートしているので、特定のパラダイムしか使えない言語はありません。
パラダイムごとに得手・不得手がありますので、1つのアプリケーションでも、用途に合わせてパラダイムを切り替えて使えばよいです。

代表的なプログラミング・パラダイムには、以下のようなものがあります。

- 手続き型プログラミング
- 構造化プログラミング
- オブジェクト指向プログラミング
- 関数型プログラミング
- イベント駆動プログラミング
- メタプログラミング


オブジェクト指向の説明
-

オブジェクト指向は、**オブジェクト単位**で物事を構成します。
じゃあオブジェクトとは何なのか、という説明がイケてないものが多い気がします。車や動物で例えられても、ピンと来ないのは仕方ないと思います。

オブジェクトとは、**処理とデータのセット**です。
処理はデータを処理しなければ意味がない、データは処理されなければ意味がないので、処理とデータをセットにしてしまおう、というのがオブジェクト指向の原点です。

文字列を表すStringオブジェクトで例示します。
```java
String mail = "taro@sample.jp";
mail.length(); //=> 14
mail.split("@"); //=> ["taro", "sample.jp"]
mail.startsWith("t"); //=> true
```

文字列のデータと、文字列操作がセットになっているので分かりやすい！合理的！ということです。
この考え方に沿ってオブジェクトを作ることで、意味でまとまった単位でプログラムが書けます。

```java
class User {
    public String name;
    public Integer age;
    public Date birth;
}

User taro = new User();
taro.name = "taro";
```

継承や多態性、カプセル化を説明するのは難しいですが、UI部品を実装することを想像すると分かりやすいかもしれません。

|部品                  |入力値  |活性制御|クリック|
|----------------------|--------|--------|--------|
|![](./ui_label.png)   |なし    |なし    |なし    |
|![](./ui_link.png)    |なし    |なし    |**あり**|
|![](./ui_button.png)  |なし    |**あり**|**あり**|
|![](./ui_input.png)   |**あり**|**あり**|**あり**|
|![](./ui_checkbox.png)|なし    |**あり**|**あり**|

```java
//FIXME: more better code.
class UiBase {
    public String label;
    public String value;
    public Boolean enabled;
    public void onClick(){};
}
class UiLabel extends UiBase {
    public String label;
    public String value;// no value
    public Boolean enabled;// everytime true
    public void onClick(){/* do nothing.*/};
}
```

これらはもっとプログラムに慣れた頃、良い設計を学ぶべき頃に学ぶので良いと思います。


オブジェクト指向の問題点
-

1990年代に注目され、主要なパラダイムの地位にあったオブジェクト指向ですが、かつてほど「良い選択」とは見なされなくなってきました。

理由はデバッグの難しさです。

オブジェクト指向の問題は、すべてのオブジェクトが状態を持ててしまうことにあります。
処理とデータがセットになっているのは合理的かもしれませんが、バグを見つけにくくもします。

例えば期待しない結果を返すバグがあったとします。
```java
taro.job.salary;// expect 10 but 11
```

処理に問題がなかった時、次に疑うべき箇所はどこでしょうか？
答えはこのオブジェクトの内部状態を直接または間接的に変更しうる処理すべてです。
つまりプログラムの規模が大きくなればなるほど、問題を特定するのが難しくなります。

### 回避策

> オブジェクト指向の問題は、すべてのオブジェクトが状態を持ててしまうことにあります。

どんなアプリケーションも、少なからず状態を持ちます。
しかし、状態を持つオブジェクトは少なければ少ないほどプログラム全体の未通しが良いです。

> パラダイムごとに得手・不得手がありますので、1つのアプリケーションでも、用途に合わせてパラダイムを切り替えて使えばよいです。

オブジェクト指向が効果的に機能する箇所以外では、オブジェクト指向を使うのは辞めたほうが良いです。
状態を持たなくてよい処理を記述する場合、状態を持ちうるオブジェクト的な処理ではなく、同じ入力には必ず同じ結果を返す**関数的**な処理を心掛けると良いでしょう。

Java的に言うと**Staticなクラス**で対応できるなら、そちらを選ぶべきです。